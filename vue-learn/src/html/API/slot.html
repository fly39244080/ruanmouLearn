<!DOCTYPE html>
<html xmlns:v-bind="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <link
        href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css"
        rel="stylesheet">
        <script src="../../../node_modules/vue/dist/vue.min.js"></script>
        <title>modal实例</title>
    </head>
    <body>
    <!--modal组件模板-->
        <template id="modalTpl">
            <div role="dialog" >
                <div role="document" style="width: 300px">
                    <div class="modal-content">
                        <slot name="modal-header"> 
                            <div class="modal-header">
                                <button type="button" class="close" @click="closeInner">
                                    <span>&times;</span>
                                </button>
                                <h4 class="modal-title">
                                    标题
                                    <slot name="title">{{title}}</slot>
                                </h4>
                            </div>
                        </slot>
                        <slot name="modal-body">
                            <div class="modal-body">测试</div>
                        </slot>
                        <slot name="modal-footer">
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" @click="closepop">取消</button>
                                <button type="button" class="btn btn-primary" @click="okpop">确定</button>
                            </div>
                        </slot>
                    </div>
                </div>
            </div>
        </template>

        <!--父组件调用方式-->
        <div id="app">
            <button @click="isPShow = true" style="margin:30px;">open</button>
            <model-win v-if="isPShow" ref="modelWin"  :okpop="okOutPop" :closepop="closeOutPop">
                <!--替换modal组件中的 <slot name="modal-header">里面内容省略</slot> 插槽-->
                <!-- <div slot="modal-header" class="modal-header">我是slot传进去的标题</div> -->

                <!--替换modal组件中的 <slot name="modal-body"></slot> 插槽-->
                <div slot="modal-body" class="modal-body">
                        我是slot传进去的内容
                </div>

                <!--此div直接被省略-->
                <div>xxxxxx</div>
                
                <!--父组件中没有 <div slot="modal-footer"></div>,所以使用子组件默认的html结构-->
            </model-win>
        </div>
        <script>
            //  注册modal组件
            Vue.component('modelWin',{
                template:'#modalTpl',// 获取模板中html结构
                props:['title','isToShow','okpop','closepop'],
                //计算属性
                computed: {
                   
                },
                data(){
                    return {
                        
                    }
                },
                watch: {
                  
                },
                methods: {
                    closeInner(){
                       console.log('ooooo'); 
                    }
                }
            });

            let vm = new Vue({
                el : '#app',
                data : {
                    isPShow : false
                },
                methods: {
                    closeOutPop: function () {
                        alert('cancel');
                        this.isPShow = false;
                    },
                    okOutPop(){
                        alert('save');
                        this.$refs.modelWin.closeInner();
                        this.isPShow = false;
                    }
                }
            });
        </script>
    </body>
</html>