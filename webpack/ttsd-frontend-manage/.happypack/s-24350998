'use strict';

require("activityStyle/coupon_special_2017.scss");
var browser = globalFun.browserRedirect();
var commonFun = require('publicJs/commonFun');

var $wechatCoupon = $('#wechatCouponSpecial');

//PC页面
if ($('#pcCouponSpecial').length) {

    var redBagUrl = require('../images/2017/coupon-special/red-all.png');
    var redBagBottomUrl = require('../images/2017/coupon-special/bg-red.png');
    var topHeaderUrl = require('../images/2017/coupon-special/head-coupon-wap.png');
    document.getElementById('redBag').src = redBagUrl;

    if (browser == 'mobile') {
        var topImg = new Image();
        topImg.src = topHeaderUrl;
        topImg.onload = function () {
            $('#topHeader').append(topImg);
        };

        var bottomImg = new Image();
        bottomImg.src = redBagBottomUrl;
        bottomImg.onload = function () {
            $('#mobileImg').append(bottomImg);
        };
    }

    var locationUrl = location.href;
    var parseURL = globalFun.parseURL(locationUrl);
    var IsShare = parseURL.params.come;
    if (IsShare == 'wechat') {
        $('.header-container,.nav-container,.footer-responsive').hide();
    }
} else if ($wechatCoupon.length) {
    $('.btn-receive', $wechatCoupon).on('click', function () {
        location.href = '/activity/celebration-coupon/draw';
    });

    window.onload = function () {
        var drew = $wechatCoupon.data('drew');
        if (drew) {
            layer.msg('每个用户只能领取一次哦！');
            $('.btn-receive', $wechatCoupon).prop('disabled', true);
        }
    };
}